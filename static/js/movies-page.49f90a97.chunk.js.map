{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","containers/MoviesPage/MoviesPage.js","helpers/request.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","img/default-img.jpg"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","MoviesPage","state","movies","search","message","addSearchQuery","target","name","setState","handleQueryOnSubmit","e","preventDefault","searchRequest","props","history","push","a","URL","searchMoviesUrl","request","result","results","this","location","match","className","onSubmit","type","autoComplete","autoFocus","placeholder","onChange","length","map","movie","id","to","pathname","url","from","poster_path","src","alt","title","defaultImg","release_date","Component","baseUrl","withCredentials","process","query","requestMovieUrl","urlType","method","body","axios","data","_arrayLikeToArray","arr","len","i","arr2","Array","_toConsumableArray","isArray","iter","Symbol","iterator","o","minLen","n","prototype","toString","call","slice","constructor","test","TypeError","module","exports"],"mappings":"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","file":"static/js/movies-page.49f90a97.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { request, searchMoviesUrl } from \"../../helpers/request\";\nimport defaultImg from \"../../img/default-img.jpg\";\nimport \"./MoviesPage.css\";\n\nclass MoviesPage extends Component {\n  state = {\n    movies: [],\n    search: \"\",\n    message: \"\",\n  };\n\n  componentDidMount() {\n    if (this.props.location.state) {\n      const { search } = this.props.location.state;\n      this.setState({ search });\n\n      if (search) {\n        this.searchRequest(search);\n      }\n    }\n  }\n\n  addSearchQuery = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleQueryOnSubmit = (e) => {\n    e.preventDefault();\n    const { search } = this.state;\n\n    if (search) {\n      this.searchRequest(search);\n\n      this.props.history.push({\n        search: `query=${search}`,\n        state: {\n          search,\n        },\n      });\n    } else {\n      return;\n    }\n  };\n\n  searchRequest = async (search) => {\n    const URL = searchMoviesUrl(search);\n\n    try {\n      const result = await request(\"get\", URL);\n      this.setState({\n        movies: [...result.results],\n      });\n    } catch (error) {\n      const message = error.message;\n      this.setState({ message });\n    }\n  };\n\n  render() {\n    const { search, movies, message } = this.state;\n    const { match } = this.props;\n\n    return (\n      <div className=\"Container\">\n        <div className=\"Searchbar\">\n          <form className=\"SearchForm\" onSubmit={this.handleQueryOnSubmit}>\n            <input\n              className=\"SearchForm-input\"\n              type=\"text\"\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search films\"\n              name=\"search\"\n              value={search}\n              onChange={this.addSearchQuery}\n            />\n            <button type=\"submit\" className=\"SearchForm-button\">\n              <span className=\"SearchForm-button-label\">Search</span>\n            </button>\n          </form>\n        </div>\n        {message && (\n          <h2 className=\"Error\">Whoops, something went wrong: {message}</h2>\n        )}\n        {movies.length > 0 && (\n          <ul className=\"MovieList\">\n            {movies.map((movie) => (\n              <li key={movie.id} className=\"MovieCard\">\n                <NavLink\n                  to={{\n                    pathname: `${match.url}/${movie.id}`,\n                    state: {\n                      from: `${match.url}`,\n                      search: `${search}`,\n                    },\n                  }}\n                  className=\"CardLink\"\n                >\n                  <div className=\"CardPoster\">\n                    {movie.poster_path ? (\n                      <img\n                        src={`https://image.tmdb.org/t/p/w200${movie.poster_path}`}\n                        alt={movie.title}\n                      />\n                    ) : (\n                      <img src={defaultImg} alt={movie.title} />\n                    )}\n                  </div>\n                  <h3 className=\"CardTitle\">{movie.title}</h3>\n                  <span className=\"CardReleaseDate\">{movie.release_date}</span>\n                </NavLink>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default MoviesPage;\n","import axios from \"axios\";\n\nconst baseUrl = `https://api.themoviedb.org/3`;\n\nexport const withCredentials = (url) => {\n  return `${url}api_key=${process.env.REACT_APP_API_KEY}`;\n};\n\nexport const searchMoviesUrl = (query) => {\n  return withCredentials(`${baseUrl}/search/movie?query=${query}&`);\n};\n\nexport const requestMovieUrl = (urlType = \"/trending/movie/day\") => {\n  return withCredentials(`${baseUrl}${urlType}?`);\n};\n\nexport const request = async (method, url, body = null) => {\n  const result = await axios[method](url, body);\n  return result.data;\n};\n\n/*\nhttps://api.themoviedb.org/3/trending/movie/day?api_key=<<api_key>> - список самых популярных фильмов на сегодня для создания коллекции на главной странице.\nhttps://api.themoviedb.org/3/search/movie?api_key=<<api_key>>&query=Max - поиск кинофильма по ключевому слову на странице фильмов.\nhttps://api.themoviedb.org/3/movie/{movie_id}?api_key=<<api_key>> - запрос полной информации о фильме для страницы кинофильма.\nhttps://api.themoviedb.org/3/movie/{movie_id}/credits?api_key=<<api_key>> - запрос информации о актёрском составе для страницы кинофильма.\nhttps://api.themoviedb.org/3/movie/{movie_id}/reviews?api_key=<<api_key>> - запрос обзоров для страницы кинофильма.\n*/\n\n// export const getMovieReviewsUrl = (id) => {\n//   return withCredentials(`https://api.themoviedb.org/3/movie/${id}/reviews?`);\n// };\n\n// export const getMovieCreditsUrl = (id) => {\n//   return withCredentials(`https://api.themoviedb.org/3/movie/${id}/credits?`);\n// };\n\n// export const getMovieDetails = (id) => {\n//   return withCredentials(`https://api.themoviedb.org/3/movie/${id}?`);\n// };\n\n// export const getTrendingMovieUrl = () => {\n//   return withCredentials(`https://api.themoviedb.org/3/trending/movie/day?`);\n// };\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = __webpack_public_path__ + \"static/media/default-img.80360e3f.jpg\";"],"sourceRoot":""}